.. _installer:

Развертывание из консольного инсталлятора
================================================

Для развертывания FindFace Security на одиночном сервере можно использовать консольный инсталлятор.


.. warning::
     Инсталлятор не предназначен для обновления FindFace Security.

.. seealso::
   
   * :ref:`deploy`


Выполните следующие действия:

#. Загрузите файл инсталлятора ``<findface-security-xxx>.run``.
#. Поместите файл ``.run`` в любую папку на сервере установки (например, ``/home/username``).
#. Из данной папки сделайте файл ``.run`` исполняемым.

   .. code::

       chmod +x <findface-security-xxx>.run

#. Запустите файл ``.run``.

   .. code::

       sudo ./<findface-security-xxx>.run

   Инсталлятор проверит, соответствует ли сервер системным требованиям. После этого компоненты FindFace Security будут автоматически установлены, настроены и запущены в соответствии со следующей конфигурацией:


   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | Компонент                   | Особенности установки                                                                                |
   +=============================+======================================================================================================+
   | findface-postgres-facen     | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | ffsecurity                  | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | ffsecurity-ui               | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | fkvideo_detector 	         | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | findface-extraction-api     | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | NTLS 	                 | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+  
   | nginx                       | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | База данных PostgreSQL      | Устанавливается и запускается в стандартной конфигурации.                                            |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | Сетевое хранилище Redis     | Устанавливается и запускается.                                                                       |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
   | jq 	                 | Устанавливается. Используется для структурирования API-ответов от FindFace Security в формате JSON.  |
   +-----------------------------+------------------------------------------------------------------------------------------------------+
 
#. По завершении установки в консоль будет выведена информация, необходимая для использования FindFace Security:

   .. tip::
       Обязательно сохраните эти данные: они вам понадобятся.

   .. code::

      ###############################################
      #          Installation is complete           #
      ###############################################
      - upload your license to http://172.20.77.82:3185/
        login:          admin
        password:       bXr3n3n
      - user interface: http://172.20.77.82/
        superuser:      admin
        password:       admin

#. Загрузите файл лицензии через веб-интерфейс NTLS ``http://<IP_адрес_сервера>:3185/#/``. Для доступа в веб-интерфейс NTLS используйте логин и пароль, выведенные в консоли.

   .. note::
      IP-адрес сервера в ссылках на веб-интерфейсы FindFace имеет вид ``127.0.0.1`` или <IP_адрес_в_сети>, в зависимости от того, принадлежит ли сервер к сети.


